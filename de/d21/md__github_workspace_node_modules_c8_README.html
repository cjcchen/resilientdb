<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: c8 - native V8 code-coverage</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ResilientDB<span id="projectnumber">&#160;v1.3.1</span>
   </div>
   <div id="projectbrief">NexRes</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d21/md__github_workspace_node_modules_c8_README.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">c8 - native V8 code-coverage </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://github.com/bcoe/c8/workflows/ci/badge.svg" alt="ci" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/nycrc/bcoe/c8" alt="nycrc config on GitHub" class="inline"/> <a href="https://conventionalcommits.org"><img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg" alt="Conventional Commits" style="pointer-events: none;" class="inline"/></a></p>
<p>Code-coverage using <a href="https://nodejs.org/dist/latest-v10.x/docs/api/cli.html#cli_node_v8_coverage_dir">Node.js' built in functionality</a> that's compatible with <a href="https://istanbul.js.org/docs/advanced/alternative-reporters/">Istanbul's reporters</a>.</p>
<p>Like <a href="https://github.com/istanbuljs/nyc">nyc</a>, c8 just magically works:</p>
<div class="fragment"><div class="line">npm i c8 -g</div>
<div class="line">c8 node foo.js</div>
</div><!-- fragment --><p>The above example will output coverage metrics for <code>foo.js</code>.</p>
<h1><a class="anchor" id="autotoc_md567"></a>
Checking for "full" source coverage using &lt;tt&gt;--all&lt;/tt&gt;</h1>
<p>By default v8 will only give us coverage for files that were loaded by the engine. If there are source files in your project that are flexed in production but not in your tests, your coverage numbers will not reflect this. For example, if your project's <code>main.js</code> loads <code>a.js</code> and <code>b.js</code> but your unit tests only load <code>a.js</code> your total coverage could show as <code>100%</code> for <code>a.js</code> when in fact both <code>main.js</code> and <code>b.js</code> are uncovered.</p>
<p>By supplying <code>--all</code> to c8, all files in <code>cwd</code> that pass the <code>--include</code> and <code>--exclude</code> flag checks, will be loaded into the report. If any of those files remain uncovered they will be factored into the report with a default of 0% coverage.</p>
<h1><a class="anchor" id="autotoc_md568"></a>
c8 report</h1>
<p>run <code>c8 report</code> to regenerate reports after <code>c8</code> has already been run.</p>
<h1><a class="anchor" id="autotoc_md569"></a>
Checking coverage</h1>
<p>c8 can fail tests if coverage falls below a threshold. After running your tests with c8, simply run:</p>
<div class="fragment"><div class="line">c8 check-coverage --lines 95 --functions 95 --branches 95</div>
</div><!-- fragment --><p>c8 also accepts a <code>--check-coverage</code> shorthand, which can be used to both run tests and check that coverage falls within the threshold provided:</p>
<div class="fragment"><div class="line">c8 --check-coverage --lines 100 npm test</div>
</div><!-- fragment --><p>The above check fails if coverage falls below 100%.</p>
<p>To check thresholds on a per-file basis run:</p>
<div class="fragment"><div class="line">c8 check-coverage --lines 95 --per-file</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md570"></a>
Ignoring Uncovered Lines, Functions, and Blocks</h1>
<p>Sometimes you might find yourself wanting to ignore uncovered portions of your codebase. For example, perhaps you run your tests on Linux, but there's some logic that only executes on Windows.</p>
<p>To ignore lines, blocks, and functions, use the special comment:</p>
<p><code>/* c8 ignore next */</code>.</p>
<h2><a class="anchor" id="autotoc_md571"></a>
Ignoring the next line</h2>
<div class="fragment"><div class="line">const myVariable = 99</div>
<div class="line">/* c8 ignore next */</div>
<div class="line">if (process.platform === &#39;win32&#39;) console.info(&#39;hello world&#39;)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md572"></a>
Ignoring the next N lines</h2>
<div class="fragment"><div class="line">const myVariable = 99</div>
<div class="line">/* c8 ignore next 3 */</div>
<div class="line">if (process.platform === &#39;win32&#39;) {</div>
<div class="line">  console.info(&#39;hello world&#39;)</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md573"></a>
Ignoring all lines until told</h2>
<div class="fragment"><div class="line">/* c8 ignore start */</div>
<div class="line">function dontMindMe() {</div>
<div class="line">  // ...</div>
<div class="line">}</div>
<div class="line">/* c8 ignore stop */</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md574"></a>
Ignoring a block on the current line</h2>
<div class="fragment"><div class="line">const myVariable = 99</div>
<div class="line">const os = process.platform === &#39;darwin&#39; ? &#39;OSXy&#39; /* c8 ignore next */ : &#39;Windowsy&#39;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md575"></a>
Supported Node.js Versions</h1>
<p>c8 uses <a href="https://github.com/nodejs/node/pull/22527">native V8 coverage</a>, make sure you're running Node.js <code>&gt;= 10.12.0</code>.</p>
<h1><a class="anchor" id="autotoc_md576"></a>
Contributing to &lt;tt&gt;c8&lt;/tt&gt;</h1>
<p>See the contributing guide here. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
