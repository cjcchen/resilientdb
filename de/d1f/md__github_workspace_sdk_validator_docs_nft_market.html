<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: Building a NFT market with resdb</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ResilientDB<span id="projectnumber">&#160;v1.3.1</span>
   </div>
   <div id="projectbrief">NexRes</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d1f/md__github_workspace_sdk_validator_docs_nft_market.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building a NFT market with resdb </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md3400"></a>
How can Sajjad sell his painting to Mo?</h1>
<ol type="1">
<li>Sajjad registers his painting as an immutable asset of which he has ownership</li>
<li>While registering the asset he would need to share some immutable info such as <code>name of painting</code>, <code>date of creation</code>, <code>painter</code> ect.</li>
<li>Optional metadata can be added as well about things like <code>price</code>, <code>currency</code> ect.</li>
</ol>
<ol type="1">
<li>Upload the NFT publicly for everyone to see</li>
<li>Sell the NFT to Mo</li>
</ol>
<h2><a class="anchor" id="autotoc_md3401"></a>
The above process in terms of transactions</h2>
<ol type="1">
<li>Creating the NFT = <code>CREATE</code> transaction</li>
<li>Uploading the NFT = <code>SEND</code> transaction or <code>send_commit</code></li>
<li>transferring ownership from Sajjad to Mo = <code>TRANSFER</code> transaction</li>
</ol>
<p>Resdb uses public key cryptography to register and maintain the integrity and security of assets. Each asset has to be signed with the owner's private key. This provides surity that the owner of the asset is the one making the transactions.</p>
<p>Each transactions generates a unique hash called <code>transaction ID</code>.</p>
<h1><a class="anchor" id="autotoc_md3402"></a>
Creating and Transferring Assets</h1>
<h3><a class="anchor" id="autotoc_md3403"></a>
Importing the important stuff</h3>
<div class="fragment"><div class="line"><span class="keyword">from</span> resdb_driver <span class="keyword">import</span> Resdb</div>
<div class="line"><span class="keyword">from</span> resdb_driver.crypto <span class="keyword">import</span> generate_keypair</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3404"></a>
Generating keys</h3>
<div class="fragment"><div class="line">Sajjad, Mo = generate_keypair(), generate_keypair()</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3405"></a>
Set up root url</h3>
<div class="fragment"><div class="line">root_url = <span class="stringliteral">&#39;https://resdb_url:8080&#39;</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3406"></a>
PART 1: Creating the Asset and registering it under Sajjad's ownership</h3>
<div class="fragment"><div class="line">db = Nesres(root_url)</div>
<div class="line">painting_asset = {</div>
<div class="line">    <span class="stringliteral">&#39;data&#39;</span>: {</div>
<div class="line">        <span class="stringliteral">&#39;painting&#39;</span>: {</div>
<div class="line">            <span class="stringliteral">&#39;serialized_img&#39;</span>: <span class="stringliteral">&#39;qwertyuioplkjhgfdazxcvbnm&#39;</span> <span class="comment"># everything under data is immutable stuff</span></div>
<div class="line">            <span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;New Mona Lisa&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;painter&#39;</span>: <span class="stringliteral">&#39;Sajjad&#39;</span></div>
<div class="line">        },</div>
<div class="line">    },</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">painting_asset_metadata = {</div>
<div class="line">    <span class="stringliteral">&#39;date_started&#39;</span>: <span class="stringliteral">&#39;1/1/2022&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;date_completed&#39;</span>: <span class="stringliteral">&#39;12/3/2022&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;price&#39;</span>: <span class="stringliteral">&#39;100&#39;</span>,</div>
<div class="line">    <span class="stringliteral">&#39;currency&#39;</span>: <span class="stringliteral">&#39;USD&#39;</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">prepared_creation_tx = db.transactions.prepare(</div>
<div class="line">    operation=’CREATE’,</div>
<div class="line">    signers=Sajjad.public_key,</div>
<div class="line">    asset=painting_asset,</div>
<div class="line">    metadata=painting_asset_metadata</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">fulfilled_creation_tx = db.transactions.fulfill(</div>
<div class="line">    prepared_creation_tx,</div>
<div class="line">    private_keys=Sajjad.private_key</div>
<div class="line">)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3407"></a>
Upload the asset to the database</h3>
<div class="fragment"><div class="line">sent_creation_tx = db.transactions.send_commit(fulfilled_creation_tx)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3408"></a>
PART 2: preparing the transfering of asset ownership from Sajjad to Mo</h3>
<div class="fragment"><div class="line">txid = fulfilled_creation_tx[<span class="stringliteral">&#39;id&#39;</span>] <span class="comment"># In reality this transaction id and asset details needs to be fetched from the database</span></div>
<div class="line">asset_id = txid</div>
<div class="line">transfer_asset = {</div>
<div class="line">    <span class="stringliteral">&#39;id&#39;</span>: asset_id</div>
<div class="line">}</div>
<div class="line">output_index = 0</div>
<div class="line">output = fulfilled_creation_tx[<span class="stringliteral">&#39;outputs&#39;</span>][output_index]</div>
<div class="line">transfer_input = {</div>
<div class="line">    <span class="stringliteral">&#39;fulfillment&#39;</span>: output[<span class="stringliteral">&#39;condition&#39;</span>][<span class="stringliteral">&#39;details&#39;</span>],</div>
<div class="line">    <span class="stringliteral">&#39;fulfills&#39;</span>: {</div>
<div class="line">        ‘output_index’: output_index,</div>
<div class="line">        ‘transaction_id’: fulfilled_creation_tx[<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&#39;owners_before&#39;</span>: output[<span class="stringliteral">&#39;public_keys&#39;</span>]</div>
<div class="line">}</div>
<div class="line">prepared_transfer_tx = db.transactions.prepare(</div>
<div class="line">    operation=’TRANSFER’,</div>
<div class="line">    asset=transfer_asset,</div>
<div class="line">    inputs=transfer_input,</div>
<div class="line">    recipients=Mo.public_key,</div>
<div class="line">)</div>
<div class="line">fulfilled_transfer_tx = db.transactions.fulfill(</div>
<div class="line">    prepared_transfer_tx,</div>
<div class="line">    private_keys=Sajjad.private_key,</div>
<div class="line">)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3409"></a>
competing the TRANSFER operatiom with a commit</h3>
<p><code>sent_transfer_tx = resdb.transactions.send_commit(fulfilled_transfer_tx)</code></p>
<h3><a class="anchor" id="autotoc_md3410"></a>
Comfirming</h3>
<div class="fragment"><div class="line">print(“Is Mo the owner of the painting?”,</div>
<div class="line">    sent_transfer_tx[‘outputs’][0][‘public_keys’][0] == Mo.public_key)</div>
<div class="line">print(“Was Sajjad the previous owner of the painting?”,</div>
<div class="line">    fulfilled_transfer_tx[‘inputs’][0][‘owners_before’][0] == Sajjad.public_key)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3411"></a>
!Note!</h3>
<p>We are using the same transaction model as <a href="https://github.com/bigchaindb/BEPs/tree/master/13">bigchaindb transaction model</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
