<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: Compression</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ResilientDB<span id="projectnumber">&#160;v1.3.1</span>
   </div>
   <div id="projectbrief">NexRes</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d7/d0f/md__github_workspace_go_client_pkg_mod_google_golang_org_grpc_v1_54_0_Documentation_compression.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Compression </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The preferred method for configuring message compression on both clients and servers is to use <a href="https://godoc.org/google.golang.org/grpc/encoding#RegisterCompressor"><code>encoding.RegisterCompressor</code></a> to register an implementation of a compression algorithm. See <code>grpc/encoding/gzip/gzip.go</code> for an example of how to implement one.</p>
<p>Once a compressor has been registered on the client-side, RPCs may be sent using it via the <a href="https://godoc.org/google.golang.org/grpc#UseCompressor"><code>UseCompressor</code></a> <code>CallOption</code>. Remember that <code>CallOption</code>s may be turned into defaults for all calls from a <code>ClientConn</code> by using the <a href="https://godoc.org/google.golang.org/grpc#WithDefaultCallOptions"><code>WithDefaultCallOptions</code></a> <code>DialOption</code>. If <code>UseCompressor</code> is used and the corresponding compressor has not been installed, an <code>Internal</code> error will be returned to the application before the RPC is sent.</p>
<p>Server-side, registered compressors will be used automatically to decode request messages and encode the responses. Servers currently always respond using the same compression method specified by the client. If the corresponding compressor has not been registered, an <code>Unimplemented</code> status will be returned to the client.</p>
<h1><a class="anchor" id="autotoc_md47"></a>
Deprecated API</h1>
<p>There is a deprecated API for setting compression as well. It is not recommended for use. However, if you were previously using it, the following section may be helpful in understanding how it works in combination with the new API.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
Client-Side</h2>
<p>There are two legacy functions and one new function to configure compression:</p>
<div class="fragment"><div class="line">func WithCompressor(grpc.Compressor) DialOption {}</div>
<div class="line">func WithDecompressor(grpc.Decompressor) DialOption {}</div>
<div class="line">func UseCompressor(name) CallOption {}</div>
</div><!-- fragment --><p>For outgoing requests, the following rules are applied in order:</p><ol type="1">
<li>If <code>UseCompressor</code> is used, messages will be compressed using the compressor named.<ul>
<li>If the compressor named is not registered, an Internal error is returned back to the client before sending the RPC.</li>
<li>If UseCompressor("identity"), no compressor will be used, but "identity" will be sent in the header to the server.</li>
</ul>
</li>
</ol>
<ol type="1">
<li>If <code>WithCompressor</code> is used, messages will be compressed using that compressor implementation.</li>
</ol>
<ol type="1">
<li>Otherwise, outbound messages will be uncompressed.</li>
</ol>
<p>For incoming responses, the following rules are applied in order:</p><ol type="1">
<li>If <code>WithDecompressor</code> is used and it matches the message's encoding, it will be used.</li>
</ol>
<ol type="1">
<li>If a registered compressor matches the response's encoding, it will be used.</li>
</ol>
<ol type="1">
<li>Otherwise, the stream will be closed and an <code>Unimplemented</code> status error will be returned to the application.</li>
</ol>
<h2><a class="anchor" id="autotoc_md49"></a>
Server-Side</h2>
<p>There are two legacy functions to configure compression: </p><div class="fragment"><div class="line">func RPCCompressor(grpc.Compressor) ServerOption {}</div>
<div class="line">func RPCDecompressor(grpc.Decompressor) ServerOption {}</div>
</div><!-- fragment --><p>For incoming requests, the following rules are applied in order:</p><ol type="1">
<li>If <code>RPCDecompressor</code> is used and that decompressor matches the request's encoding: it will be used.</li>
</ol>
<ol type="1">
<li>If a registered compressor matches the request's encoding, it will be used.</li>
</ol>
<ol type="1">
<li>Otherwise, an <code>Unimplemented</code> status will be returned to the client.</li>
</ol>
<p>For outgoing responses, the following rules are applied in order:</p><ol type="1">
<li>If <code>RPCCompressor</code> is used, that compressor will be used to compress all response messages.</li>
</ol>
<ol type="1">
<li>If compression was used for the incoming request and a registered compressor supports it, that same compression method will be used for the outgoing response.</li>
</ol>
<ol type="1">
<li>Otherwise, no compression will be used for the outgoing response. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
